<h1>Pending Types</h1>

<table id="types_table">
<thead>
<tr>
 <th>ID</th>
 <th>Name</th>
 <th>Locations</th>
 <th>Categories</th>
 <th>Edit</th>
 <th>Delete</th>
</tr>
</thead>
<tbody>
<% @types.each_with_index do |type, i| %>
<tr>
<td style="text-align:right"><%= type.id %></td>
<td>
 <% unless type.wikipedia_url.blank? %>
  <a href="<%= raw type.wikipedia_url %>" target="_blank"><%= h type.name %></a>
 <% else %>
  <%= type.name %>
 <% end %>
 <%= "(#{type.synonyms})" unless type.synonyms.blank? %>
</td>
<td>
[<%= @locations[i].length %>]
<% @locations[i].each do |id| %>
<%= link_to id, edit_location_path(id) unless id.nil? %>
<% end %>
</td>
<td><%= mask_to_array(type.category_mask,Type::Categories).join(", ") %></td>
<td><%= link_to 'Edit', edit_type_path(type) %></td>
<td><%= link_to 'Delete', type, method: :delete, data: { confirm: 'Are you sure?' } %></td>
</tr>
<% end %>   
</tbody>
</table>

<script type="text/javascript" charset="utf-8">
jQuery(document).ready(function(){
    jQuery('#types_table').dataTable({
      "aaSorting": [[2,"asc"], [1,"asc"]],
      "bPaginate": false
    });
});
</script>
